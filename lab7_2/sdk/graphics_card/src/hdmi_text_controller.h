#ifndef HDMI_TEXT_CONTROLLER_H
#define HDMI_TEXT_CONTROLLER_H
 
 
/****************** Include Files ********************/
#include "xil_types.h"
#include "xstatus.h"
#include "xparameters.h"
  
#define COLUMNS 80
#define ROWS 30
#define PALETTE_START 0x2000
 
#define STUDENT1NETID "<timcd2>"
#define STUDENT2NETID "<hhtut2>"
 
struct TEXT_HDMI_STRUCT {
	uint8_t             VRAM [ROWS*COLUMNS*2]; //Week 2 - extended VRAM
	//declare palette registers here, make sure you properly pad in order to correctly account for
	//gap in address map between VRAM and start of palette and control registers
	uint32_t			_padding[0x800 - 0x4B0];
	uint32_t            COLORS[8];
	uint32_t            FRAME_COUNT; //control registers should appear immediately after palette
	uint32_t            DRAWX;
	uint32_t            DRAWY;
};
 
struct COLOR{
	char name [20];
	uint8_t red;
	uint8_t green;
	uint8_t blue;
};
 
//you may have to change this line depending on your platform designer
static volatile struct TEXT_HDMI_STRUCT* hdmi_ctrl = 0x44a00000;
 
//CGA colors with names
static struct COLOR colors[]={
    {"black",          0x0, 0x0, 0x0},
	{"blue",           0x0, 0x0, 0xa},
    {"green",          0x0, 0xa, 0x0},
	{"cyan",           0x0, 0xa, 0xa},
    {"red",            0xa, 0x0, 0x0},
	{"magenta",        0xa, 0x0, 0xa},
    {"brown",          0xa, 0x5, 0x0},
	{"light gray",     0xa, 0xa, 0xa},
    {"dark gray",      0x5, 0x5, 0x5},
	{"light blue",     0x5, 0x5, 0xf},
    {"light green",    0x5, 0xf, 0x5},
	{"light cyan",     0x5, 0xf, 0xf},
    {"light red",      0xf, 0x5, 0x5},
	{"light magenta",  0xf, 0x5, 0xf},
    {"yellow",         0xf, 0xf, 0x5},
	{"white",          0xf, 0xf, 0xf}
};

// default background screen
char screen_arr[30][80] = {
    /* Row 0 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 1 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 2 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 3 */  { ' ',' ',' ','S','O','N','G',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 4 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','S','O','N','G',' ','E','D','I','T','O','R',' ',' ' },
    /* Row 5 */  { ' ',' ',' ','P','H','R','A','S','E',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 6 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
	/* Row 7 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ','P','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','P','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','P','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','P','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
	/* Row 8 */  { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 9 */  { ' ',' ',' ',' ',' ','N','O','T','E',' ','V','O','L',' ','I','N',' ',' ',' ',' ','N','O','T','E',' ','V','O','L',' ','I','N',' ',' ',' ',' ','N','O','T','E',' ','V','O','L',' ','I','N',' ',' ',' ',' ','N','O','T','E',' ','V','O','L',' ','I','N',' ',' ',' ',' ',' ',' ','C','1',' ','C','2',' ','C','3',' ','C','4',' ',' ' },
    /* Row 10 */ { ' ',' ',' ','0','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','0',' ','-','-',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 11 */ { ' ',' ',' ','0','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','1',' ','-','-',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 12 */ { ' ',' ',' ','0','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','2',' ','-','-',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 13 */ { ' ',' ',' ','0','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','3',' ','P','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 14 */ { ' ',' ',' ','0','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','4',' ','P','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 15 */ { ' ',' ',' ','0','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 16 */ { ' ',' ',' ','0','6',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','6',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','6',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','6',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','6',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 17 */ { ' ',' ',' ','0','7',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','7',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','7',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','7',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','7',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 18 */ { ' ',' ',' ','0','8',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','8',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','8',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','8',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','8',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 19 */ { ' ',' ',' ','0','9',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','9',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','9',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','9',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','0','9',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 20 */ { ' ',' ',' ','1','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','0',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 21 */ { ' ',' ',' ','1','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','1',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 22 */ { ' ',' ',' ','1','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','2',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 23 */ { ' ',' ',' ','1','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','3',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 24 */ { ' ',' ',' ','1','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','4',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 25 */ { ' ',' ',' ','1','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','1','5',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 26 */ { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 27 */ { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 28 */ { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
    /* Row 29 */ { ' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ' },
};

/**************************** Type Definitions *****************************/
/**
 *
 * Write a value to a HDMI_TEXT_CONTROLLER register. A 32 bit write is performed.
 * If the component is implemented in a smaller width, only the least
 * significant data is written.
 *
 * @param   BaseAddress is the base address of the HDMI_TEXT_CONTROLLERdevice.
 * @param   RegOffset is the register offset from the base to write to.
 * @param   Data is the data written to the register.
 *
 * @return  None.
 *
 * @note
 * C-style signature:
 * 	void HDMI_TEXT_CONTROLLER_mWriteReg(u32 BaseAddress, unsigned RegOffset, u32 Data)
 *
 */
#define HDMI_TEXT_CONTROLLER_mWriteReg(BaseAddress, RegOffset, Data) \
  	Xil_Out32((BaseAddress) + (RegOffset), (u32)(Data))

/**
 *
 * Read a value from a HDMI_TEXT_CONTROLLER register. A 32 bit read is performed.
 * If the component is implemented in a smaller width, only the least
 * significant data is read from the register. The most significant data
 * will be read as 0.
 *
 * @param   BaseAddress is the base address of the HDMI_TEXT_CONTROLLER device.
 * @param   RegOffset is the register offset from the base to write to.
 *
 * @return  Data is the data from the register.
 *
 * @note
 * C-style signature:
 * 	u32 HDMI_TEXT_CONTROLLER_mReadReg(u32 BaseAddress, unsigned RegOffset)
 *
 */
#define HDMI_TEXT_CONTROLLER_mReadReg(BaseAddress, RegOffset) \
    Xil_In32((BaseAddress) + (RegOffset))

/************************** Function Prototypes ****************************/
/**
 *
 * Run a self-test on the driver/device. Note this may be a destructive test if
 * resets of the device are performed.
 *
 * If the hardware system is not built correctly, this function may never
 * return to the caller.
 *
 * @param   baseaddr_p is the base address of the HDMI_TEXT_CONTROLLER instance to be worked on.
 *
 * @return
 *
 *    - XST_SUCCESS   if all self-test code passed
 *    - XST_FAILURE   if any self-test code failed
 *
 * @note    Caching must be turned off for this function to work.
 * @note    Self test may fail if data memory and device are not on the same bus.
 *
 */

void textHDMIColorClr();
void textHDMIDrawColorText(char* str, int x, int y, uint8_t background, uint8_t foreground);
void setColorPalette (uint8_t color, uint8_t red, uint8_t green, uint8_t blue); //Fill in this code
void sleepframe(uint32_t frames);
void paletteTest();
void textHDMIColorScreenSaver();
void hdmiTestWeek2(); //call this for your Week 2 demo 
void drawTracker();
 
#endif // HDMI_TEXT_CONTROLLER_H
